graph TB
    subgraph "ğŸ§ª TESTING PYRAMID"
        UnitTests[ğŸ”¬ Unit Tests<br/>@Test + @MockBean<br/>Fast, Isolated]
        IntegrationTests[ğŸ”— Integration Tests<br/>@SpringBootTest + Testcontainers<br/>Real Database]
        E2ETests[ğŸ­ End-to-End Tests<br/>@AutoConfigureTestDatabase<br/>Complete Workflows]
    end

    subgraph "ğŸ³ TESTCONTAINERS SETUP"
        PostgreSQLContainer[ğŸ˜ PostgreSQL Container<br/>Real Database Instance<br/>Isolated per Test Class]
        TestData[ğŸ“Š Banking Test Fixtures<br/>Realistic CSV/Transaction Data<br/>German Bank Formats]
        DatabaseSchema[ğŸ—„ï¸ Auto-Generated Schema<br/>Hibernate DDL-Auto<br/>Clean State per Test]
    end

    subgraph "âš™ï¸ GRADLE KOTLIN DSL"
        TestDependencies[ğŸ“¦ Test Dependencies<br/>testImplementation<br/>JUnit 5 + Testcontainers]
        TestTasks[ğŸ”§ Gradle Test Tasks<br/>./gradlew test<br/>./gradlew integrationTest]
        TestReports[ğŸ“Š Test Reports<br/>JaCoCo Coverage<br/>HTML + XML Output]
    end

    subgraph "ğŸ¦ BANKING TEST SCENARIOS"
        CSVImportTests[ğŸ“„ CSV Import Tests<br/>Sparkasse, DKB, ING Formats<br/>Auto-Detection Validation]
        CategorizationTests[ğŸ¯ Categorization Tests<br/>Keyword Matching<br/>Chain of Responsibility]
        AnalyticsTests[ğŸ“ˆ Analytics Tests<br/>Monthly Reports<br/>Financial Calculations]
        RepositoryTests[ğŸ’¾ Repository Tests<br/>Custom Queries<br/>Banking-specific Finders]
    end

    subgraph "ğŸ® TEST CONFIGURATION"
        TestApplication[ğŸš€ @TestConfiguration<br/>Test-specific Beans<br/>Mock Services]
        TestProfiles[ğŸ”§ application-test.yml<br/>Test Database Config<br/>Logging Configuration]
        TestSlices[ğŸ° @DataJpaTest<br/>@WebMvcTest<br/>Isolated Layer Testing]
    end

    %% Flow Relationships
    UnitTests --> TestApplication
    IntegrationTests --> PostgreSQLContainer
    E2ETests --> DatabaseSchema
    
    PostgreSQLContainer --> TestData
    TestData --> CSVImportTests
    TestData --> CategorizationTests
    
    TestDependencies --> UnitTests
    TestDependencies --> IntegrationTests
    TestDependencies --> E2ETests
    
    TestTasks --> TestReports
    TestReports --> TestDependencies
    
    CSVImportTests --> RepositoryTests
    CategorizationTests --> AnalyticsTests
    
    TestSlices --> TestProfiles
    TestProfiles --> TestApplication

    %% Docker Integration Note
    PostgreSQLContainer -.->|"Docker Runtime"| TestData
    
    %% Pattern Implementation
    CSVImportTests -.->|"Strategy Pattern"| CategorizationTests
    CategorizationTests -.->|"Chain of Responsibility"| AnalyticsTests
    RepositoryTests -.->|"Repository Pattern"| AnalyticsTests

    %% Test Coverage Flow
    UnitTests -.->|"~80% Coverage"| TestReports
    IntegrationTests -.->|"~60% Coverage"| TestReports
    E2ETests -.->|"~40% Coverage"| TestReports

    %% Styling
    classDef testLayer fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef containerLayer fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef gradleLayer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef bankingLayer fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef configLayer fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px

    class UnitTests,IntegrationTests,E2ETests testLayer
    class PostgreSQLContainer,TestData,DatabaseSchema containerLayer
    class TestDependencies,TestTasks,TestReports gradleLayer
    class CSVImportTests,CategorizationTests,AnalyticsTests,RepositoryTests bankingLayer
    class TestApplication,TestProfiles,TestSlices configLayer